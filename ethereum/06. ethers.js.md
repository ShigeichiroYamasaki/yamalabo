# 06. ethers.js å…¥é–€

ethereum RPC ã® ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ä½¿ã„æ–¹

2025/01/25
Shigeichiro Yamasaki

## å‰ææ¡ä»¶

* ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ hardhat node ã«ãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆ
* Hardhat console ã‚’ hardhat node ã«æŽ¥ç¶šã—ã¦ã„ã‚‹
* ä»¥ä¸‹ï¼Œhardhat console ã‹ã‚‰å®Ÿè¡Œã™ã‚‹

## ethers.js ã®APIä¸€è¦§ã®è¡¨ç¤º

```js
> ethers

=>
{
  version: '6.13.2',
  decodeBytes32String: [Function: decodeBytes32String],
  encodeBytes32String: [Function: encodeBytes32String],
  AbiCoder: [class AbiCoder],
  ConstructorFragment: [class ConstructorFragment extends Fragment],
  ErrorFragment: [class ErrorFragment extends NamedFragment],
  EventFragment: [class EventFragment extends NamedFragment],
  Fragment: [class Fragment],
  FallbackFragment: [class FallbackFragment extends Fragment],
  FunctionFragment: [class FunctionFragment extends NamedFragment],
  NamedFragment: [class NamedFragment extends Fragment],
  
  ...

  },
  getSigner: [Function: getSigner],
  getSigners: [Function: getSigners],
  getImpersonatedSigner: [Function: getImpersonatedSigner],
  getContractFactory: [Function: bound getContractFactory] AsyncFunction,
  getContractFactoryFromArtifact: [Function: getContractFactoryFromArtifact],
  getContractAt: [Function: getContractAt],
  getContractAtFromArtifact: [Function: getContractAtFromArtifact],
  deployContract: [Function: bound deployContract] AsyncFunction
}
> 
```

## ethers.js ã®åŸºæœ¬è¦ç´ 

ethereum RPC ã®åŸºæœ¬è¦ç´ ã‚’ javaSCript ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã—ãŸã‚‚ã®ã§ã™

* Provider :  ethereum ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
* Signer :    ç½²åéµã‚’ã‚‚ã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
* Contract :  ç‰¹å®šã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’javaScriptã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è¦‹ã›ãŸã‚‚ã®


### Provider

hardhat network ã«æŽ¥ç¶šã—ã¦ã„ã‚‹å ´åˆ

```js
> ethers.provider

=>
HardhatEthersProvider {
  _hardhatProvider: LazyInitializationProviderAdapter {
    _providerFactory: [AsyncFunction (anonymous)],
    _emitter: EventEmitter {
      _events: [Object: null prototype] {},
      _eventsCount: 0,
      _maxListeners: undefined,
      [Symbol(shapeMode)]: false,
      [Symbol(kCapture)]: false
    },
    _initializingPromise: Promise {
      [BackwardsCompatibilityProviderAdapter],
      [Symbol(async_id_symbol)]: 148,
      [Symbol(trigger_async_id_symbol)]: 15
    },
    provider: BackwardsCompatibilityProviderAdapter {
      _wrapped: [AutomaticGasPriceProvider],
      _provider: [AutomaticGasPriceProvider],
      sendAsync: [Function: bound sendAsync],
      send: [Function: bound send],
      _sendJsonRpcRequest: [Function: bound _sendJsonRpcRequest] AsyncFunction
    }
  },
  _networkName: 'localhost',
  _blockListeners: [],
  _transactionHashListeners: Map(0) {},
  _eventListeners: []
}
```

* ãƒ–ãƒ­ãƒƒã‚¯ç•ªå·ã®å–å¾—

```js
> await ethers.provider.getBlockNumber()

=>
2
```

* æ®‹é«˜ã®ç¢ºèª
  
metamask ã§ç¢ºèªã—ãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒ `0x8626f6940E2eb28930eFb4CeF49B2d1F2C9C1199` ã®ã¨ã

```js
> await ethers.provider.getBalance('0x8626f6940E2eb28930eFb4CeF49B2d1F2C9C1199') 
=>
10000000000000000000000n
```


### Signer

```js
>  await ethers.getSigners()

=>
[
  HardhatEthersSigner {
    _gasLimit: 30000000,
    address: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',
    provider: HardhatEthersProvider {
      _hardhatProvider: [LazyInitializationProviderAdapter],
      _networkName: 'localhost',
      _blockListeners: [],
      _transactionHashListeners: Map(0) {},
      _eventListeners: []
    }
  },
  
  ...

  },
  HardhatEthersSigner {
    _gasLimit: 30000000,
    address: '0x8626f6940E2eb28930eFb4CeF49B2d1F2C9C1199',
    provider: HardhatEthersProvider {
      _hardhatProvider: [LazyInitializationProviderAdapter],
      _networkName: 'localhost',
      _blockListeners: [],
      _transactionHashListeners: Map(0) {},
      _eventListeners: []
    }
  }
]
> 
```

index 1 ã¨ 2 ã® Signer

```js
> const s1= (await ethers.getSigners())[1]

=>
HardhatEthersSigner {
  _gasLimit: 30000000,
  address: '0x70997970C51812dc3A010C7d01b50e0d17dc79C8',
  provider: HardhatEthersProvider {
    _hardhatProvider: LazyInitializationProviderAdapter {
      _providerFactory: [AsyncFunction (anonymous)],
      _emitter: [EventEmitter],
      _initializingPromise: [Promise],
      provider: [BackwardsCompatibilityProviderAdapter]
    },
    _networkName: 'localhost',
    _blockListeners: [],
    _transactionHashListeners: Map(0) {},
    _eventListeners: []
  }
}

> const s2= (await ethers.getSigners())[2]

=>
HardhatEthersSigner {
  _gasLimit: 30000000,
  address: '0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC',
  provider: HardhatEthersProvider {
    _hardhatProvider: LazyInitializationProviderAdapter {
      _providerFactory: [AsyncFunction (anonymous)],
      _emitter: [EventEmitter],
      _initializingPromise: [Promise],
      provider: [BackwardsCompatibilityProviderAdapter]
    },
    _networkName: 'localhost',
    _blockListeners: [],
    _transactionHashListeners: Map(0) {},
    _eventListeners: []
  }
}
```

Signer s1 ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ç½²åã™ã‚‹

```js
> await s1.signMessage("Hello World")

=>
'0xdc009b92222e2770cf41436a9969b014dd7881229daa3c9b2e425057363b8d2e638a8f065554383ca5f0c68b1af8a96b2f004356bb1af3feb91d14a8e819303f1c'

```

s1 ãŒ s2 ã«ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’é€ä¿¡ã™ã‚‹

```js
> let tx = await s1.sendTransaction({ to: s2.address, value: 100000})

> tx
=>
TransactionResponse {
  provider: HardhatEthersProvider {
    _hardhatProvider: LazyInitializationProviderAdapter {
      _providerFactory: [AsyncFunction (anonymous)],
      _emitter: [EventEmitter],
      _initializingPromise: [Promise],
      provider: [BackwardsCompatibilityProviderAdapter]
    },
    _networkName: 'localhost',
    _blockListeners: [],
    _transactionHashListeners: Map(0) {},
    _eventListeners: []
  },
  blockNumber: 5,
  blockHash: '0x94973af56809fe2a33f44b96ee6bc4f6142b3e32e8b0c47e5b13ec780797239a',
  index: undefined,
  hash: '0xe188dc83184d45a1c7374bbe91d8eea679fcb792244567ef6279772a147d654c',
  type: 2,
  to: '0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC',
  from: '0x70997970C51812dc3A010C7d01b50e0d17dc79C8',
  nonce: 3,
  gasLimit: 30000000n,
  gasPrice: 1516701500n,
  maxPriorityFeePerGas: 1000000000n,
  maxFeePerGas: 1653950335n,
  maxFeePerBlobGas: null,
  data: '0x',
  value: 100000n,
  chainId: 31337n,
  signature: Signature { r: "0xf842bc6e83ee11fb02ce93774dcd65dd16cdcf4eb2e114fb32349695ecce0359", s: "0x674d7dcf729bb99d33b5187cb8e66c1a3b44e2ebb6726dd39bf4e5585c420fbe", yParity: 1, networkV: null },
  accessList: [],
  blobVersionedHashes: null
}
```

### Contract

* ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ `0x5FbDB2315678afecb367f032d93F642f64180aa3` ã¨ã—ã¾ã™
* Solidity ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã® ABI ã‚’ `function transfer(address to, uint256 amount)` ã¨ `function balanceOf(address account) external view returns (uint256)` ã¨ã—ã¾ã™ï¼Ž

#### ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤

`contract = new Contract(address, abi, provider)`

```js
> const s0= (await ethers.getSigners())[0]
> const contractAddress="0x5FbDB2315678afecb367f032d93F642f64180aa3"
> const abi = ["function transfer(address to, uint256 amount)"," function balanceOf(address account) external view returns (uint256)"]
> const contract = new ethers.Contract(contractAddress, abi, s0)
```

* ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç¢ºèª

```js
> contract

=>
Contract {
  target: '0x5FbDB2315678afecb367f032d93F642f64180aa3',
  interface: Interface {
    fragments: [ [FunctionFragment], [FunctionFragment] ],
    deploy: ConstructorFragment {
      type: 'constructor',
      inputs: [],
      payable: false,
      gas: null
    },
    fallback: null,
    receive: false
  },
  runner: HardhatEthersSigner {
    _gasLimit: 30000000,
    address: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',
    provider: HardhatEthersProvider {
      _hardhatProvider: [LazyInitializationProviderAdapter],
      _networkName: 'localhost',
      _blockListeners: [],
      _transactionHashListeners: Map(0) {},
      _eventListeners: []
    }
  },
  filters: {},
  fallback: null,
  [Symbol(_ethersInternal_contract)]: {}
}
```

* ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸ã®æ“ä½œ

```js
await contract.balanceOf(s0)

=>
1000000n

await contract.transfer(s1, 100n)

=>
ContractTransactionResponse {
  provider: HardhatEthersProvider {
    _hardhatProvider: LazyInitializationProviderAdapter {
      _providerFactory: [AsyncFunction (anonymous)],
      _emitter: [EventEmitter],
      _initializingPromise: [Promise],
      provider: [BackwardsCompatibilityProviderAdapter]
    },
    _networkName: 'localhost',
    _blockListeners: [],
    _transactionHashListeners: Map(0) {},
    _eventListeners: []
  },
  blockNumber: 3,
  blockHash: '0x1c7a8a128df6ab143b94d2a7fc1c284d16afee6ef471ec77e6f376b7420a8caa',
  index: undefined,
  hash: '0x486b0917771a45ad2d50999e916ae07449402ecce0f3ccef9f13fc39962b632c',
  type: 2,
  to: '0x5FbDB2315678afecb367f032d93F642f64180aa3',
  from: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',
  nonce: 1,
  gasLimit: 30000000n,
  gasPrice: 1674629891n,
  maxPriorityFeePerGas: 1000000000n,
  maxFeePerGas: 1853828455n,
  maxFeePerBlobGas: null,
  data: '0xa9059cbb00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c80000000000000000000000000000000000000000000000000000000000000064',
  value: 0n,
  chainId: 31337n,
  signature: Signature { r: "0x488730e600f356d559bfbc490b43cb06a1195b4a2f9b8f8d78956d234eb01811", s: "0x685756d10c5dceb8d6fbc5b300021b25443a3df165b29f356dbc902c7dcbdfa2", yParity: 0, networkV: null },
  accessList: [],
  blobVersionedHashes: null
}


>  await contract.balanceOf(s0)
999900n

>  await contract.balanceOf(s1)
100n
```

## v5 ã¨ v6 

ethers.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ v5 ã‹ã‚‰ v6 ã«ä¸ŠãŒã£ãŸã¨ãã®éžäº’æ›ã®æ³¨æ„ç‚¹ã§ã™

å¤šãã®ã‚µãƒ³ãƒ—ãƒ«ãŒ v5 ãƒ™ãƒ¼ã‚¹ãªã®ã§ï¼Œç›¸é•ç‚¹ã‚’æ„è­˜ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ï¼Ž

v5 ã§ã¯ï¼Œ `ethers.util.*` ã¨ã„ã†ã‚ˆã†ã« util ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã£ãŸãƒ¡ã‚½ãƒƒãƒ‰ãŒ  ãƒ«ãƒ¼ãƒˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ï¼Œ `ethers.*`  ã¨ãªã‚Šã¾ã™

* ä¾‹

```js
// UTF-8 ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
> let sigBytes = ethers.toUtf8Bytes("secret")
> sigBytes

=>
Uint8Array(6) [ 115, 101, 99, 114, 101, 116 ]

> let hash = ethers.sha256(ethers.toUtf8Bytes("secret"))

> hash
=>
'0x2bb80d537b1da3e38bd30361aa855686bde0eacd7162fef6a25fe97bf527a25b'

//BigNumber

> let a = BigInt("1000")
> let b = BigInt("20")
> a+b

=>
1020n

// æ™‚åˆ»
> Math.floor(Date.now() / 1000) + 3600; 

=>
1722332017
```

## contractFactory

ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¨ã¯ï¼Œã‚¼ãƒ­ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å®›å…ˆã«ã—ãŸãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹ã“ã¨ã§ã™ï¼Ž

ã“ã‚Œã‚’å®Ÿæ–½ã™ã‚‹ ethers.js ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒ contractFactory ã§ã™ï¼Ž

### ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç”Ÿæˆ

`new ethers.ContractFactory( interface , bytecode [ , signer ] )`

* 


## ethers.js ã‚’ä½¿ã£ãŸã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤

### ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤å‡¦ç†ã®å†…å®¹

1. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¸ˆã®ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ null ã‚¢ãƒ‰ãƒ¬ã‚¹ã«é€ä¿¡ã™ã‚‹
2. ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«å¼•æ•°ãŒã‚ã‚‹å ´åˆã¯ï¼ŒABIã§å¼•æ•°ã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã®æœ«å°¾ã«è¿½åŠ ã™ã‚‹

* ethers.js ã® ContractFactory é–¢æ•°

ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ã¾ã¨ã‚ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°

```js
const contractFactory = new ethers.ContractFactory(abi, bytecode, signer);
```

*  ethers.js ã® deployé–¢æ•°

ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å®Ÿéš›ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹é–¢æ•°

```js
const contract = await contractFactory.deploy(args);
```

*  ethers.js ã® waitForDeploymenté–¢æ•°

å®Ÿéš›ã«ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹é–¢æ•°

```js
await contract.waitForDeployment();
```

ä¾‹ãˆã° contract.address ã§ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã§ãã‚‹

```js
console.log("ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ï¼š", contract.address);
```


## Hardhat Ignition ã«ã‚ˆã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤

hardhat ignition ã¯ã‚¹ãƒžãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã™ï¼Ž

å®Ÿéš›ã®ãƒ‡ãƒ—ãƒ­ã‚¤å‡¦ç†ã¯ï¼ŒIgnition ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦å®šç¾©ã•ã‚Œã¾ã™ï¼Ž

### hardhat Ignition ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

javaScriptã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ©Ÿèƒ½ã«ä¼¼ãŸæ¦‚å¿µã§ï¼Œã‚¹ãƒžãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®é–¢æ•°ã‚„å€¤ãªã©ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¦å¤–éƒ¨ã«å…¬é–‹ã—ã¾ã™ï¼Ž

Ignitionãƒ¢ãƒ¼ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ï¼Œãƒ‡ãƒ—ãƒ­ã‚¤ã‚’æ”¯æ´ã™ã‚‹JavaScript é–¢æ•°ã§ã™ï¼Ž

#### hardhat-ignition-ethers ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ

```bash
npm install --save-dev @nomicfoundation/hardhat-ignition-ethers
```

### hardhat Ignition ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä½œæˆ

`./ignition/modules` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä»¥ä¸‹ã® `Token.js` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼Ž

```bash
nano ignition/modules/Token.js
```

```js
// hardhat ignition ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹
const { buildModule } = require("@nomicfoundation/hardhat-ignition/modules");

// buildModuleé–¢æ•°ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹
//  ç¬¬ï¼‘å¼•æ•°ãŒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è­˜åˆ¥å
//  å¼•æ•°ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ãŒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©ã®å®Ÿéš›ã®å†…å®¹
//   ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã®mã¯ModuleBuilderã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
//     
const TokenModule = buildModule("TokenModule", (m) => {
  const token = m.contract("Token");

  return { token };
});

module.exports = TokenModule;

```

## Hardhat ã® ignitionã‚³ãƒžãƒ³ãƒ‰ã«ã‚ˆã‚‹ Hardhat Network ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

hardhat ã® ignition ã‚³ãƒžãƒ³ãƒ‰ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼Ž

ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸçµæžœï¼Œãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚¹ãƒžãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¿”ã£ã¦ãã¾ã™

```bash
 npx hardhat ignition deploy ./ignition/modules/Token.js --network localhost

=>

Hardhat Ignition ðŸš€

Deploying [ TokenModule ]

Batch #1
  Executed TokenModule#Token

[ TokenModule ] successfully deployed ðŸš€

Deployed Addresses

TokenModule#Token - 0x5FbDB2315678afecb367f032d93F642f64180aa3
```

ä¸Šè¨˜ã®å ´åˆï¼ŒToken ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯

`0x5FbDB2315678afecb367f032d93F642f64180aa3` ã§ã™

## ã‚¤ãƒ™ãƒ³ãƒˆã®æ•æ‰

ERC-20 ã‚¤ãƒ™ãƒ³ãƒˆã®æ•æ‰ã®å ´åˆ

```js
abi = [
  "event Transfer(address indexed from, address indexed to, uint amount)"
]

// ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ç”Ÿæˆã¨ Providerã¸ã®æŽ¥ç¶š
contract = new Contract("dai.tokens.ethers.eth", abi, provider)

// Transfer ã‚¤ãƒ™ãƒ³ãƒˆã®ç›£è¦–é–‹å§‹
contract.on("Transfer", (from, to, _amount, event) => {
  const amount = formatEther(_amount, 18)
  console.log(`${ from } => ${ to }: ${ amount }`);
  // ã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–ã®çµ‚äº†
  event.removeListener();
});

// Same as above
contract.on(contract.filters.Transfer, (from, to, amount, event) => {
  // See above
})

// Listen for any Transfer to "ethers.eth"
filter = contract.filters.Transfer("ethers.eth")
contract.on(filter, (from, to, amount, event) => {
  // `to` will always be equal to the address of "ethers.eth"
});

// Listen for any event, whether it is present in the ABI
// or not. Since unknown events can be picked up, the
// parameters are not destructed.
contract.on("*", (event) => {
  // The `event.log` has the entire EventLog
});
```

